<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Прыгающие шарики</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #2c3e50;
            font-family: Arial, sans-serif;
        }
        
        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        #game-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        
        .ball {
            position: absolute;
            transition: transform 0.5s ease-out;
        }
        
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
        
        #start-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 30px;
            font-size: 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        #start-btn:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <img id="game-bg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACoCAMAAABt9SM9AAAAA1BMVEXu7u6+NTpLAAAAR0lEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO8GxYgAAb0jQcAAAAASUVORK5CYII=" alt="Игровой фон">
        <div id="score">Шариков: 0</div>
        <button id="start-btn">Начать игру</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const gameContainer = document.getElementById('game-container');
            const scoreElement = document.getElementById('score');
            const startBtn = document.getElementById('start-btn');
            const balls = [];
            let ballCount = 0;
            let gameInterval;
            
            // Замените это на ваше изображение bg_game.png в формате base64 или URL
            const bgImageUrl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACoCAMAAABt9SM9AAAAA1BMVEXu7u6+NTpLAAAAR0lEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO8GxYgAAb0jQcAAAAASUVORK5CYII=";
            
            // Замените это на ваше изображение red_guys.png в формате base64 или URL
            const ballImageUrl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCElEQVRYw+2Y0Q6DIAxFeVH+/2t3Ykw2HqRUKLgkb+kmjfFwKIVhGIZhGIZhGIZhGIZhGIZhGOZfSCl9p5S+c85vKeVnzvn1HjnnZ0rpI8Z4W9V3jPEjxviVc36s6jvn/BpjfI4x3kMIhxDCdTfGGG4hhEsI4byq7xDCJYRwXtn3MAz7YRj2wzDsh2HYD8OwH4ZhPwzDfhiG/TAM+2EY9sMw7Idh2A/DsB+GYT8Mw34Yhv0wDPthGPbDMOyHYdgPw7AfhmE/DMN+GIb9MAz7YRj2wzDsh2HYD8OwH4ZhPwzDfhiG/TAM+2EY9sMw7Idh2A/DsB+GYT8Mw34Yhv0wDPthGPbDMOyHYf4S5gVlVk4nLdcpggAAAABJRU5ErkJggg==";
            
            document.getElementById('game-bg').src = bgImageUrl;
            
            // Создание шарика
            function createBall() {
                const ball = document.createElement('img');
                ball.src = ballImageUrl;
                ball.className = 'ball';
                
                const size = 30 + Math.random() * 30;
                const initialSize = size * 0.3;
                
                ball.style.width = `${initialSize}px`;
                ball.style.height = `${initialSize}px`;
                
                // Начальная позиция
                const x = Math.random() * (gameContainer.offsetWidth - initialSize);
                const y = Math.random() * (gameContainer.offsetHeight - initialSize);
                
                ball.style.left = `${x}px`;
                ball.style.top = `${y}px`;
                
                gameContainer.appendChild(ball);
                
                balls.push({
                    element: ball,
                    x: x,
                    y: y,
                    size: size,
                    currentSize: initialSize,
                    growing: true,
                    pausing: false,
                    pauseTime: 0
                });
                
                ballCount++;
                scoreElement.textContent = `Шариков: ${ballCount}`;
            }
            
            // Обновление состояния шариков
            function updateBalls(deltaTime) {
                for (const ball of balls) {
                    if (ball.pausing) {
                        ball.pauseTime += deltaTime;
                        if (ball.pauseTime >= 500) {
                            ball.pausing = false;
                            ball.pauseTime = 0;
                            ball.growing = true;
                        }
                        continue;
                    }
                    
                    if (ball.growing) {
                        ball.currentSize += deltaTime * 0.1;
                        if (ball.currentSize >= ball.size) {
                            ball.currentSize = ball.size;
                            ball.growing = false;
                        }
                    } else {
                        ball.currentSize -= deltaTime * 0.1;
                        if (ball.currentSize <= ball.size * 0.3) {
                            ball.currentSize = ball.size * 0.3;
                            ball.growing = true;
                            ball.pausing = true;
                        }
                    }
                    
                    ball.element.style.width = `${ball.currentSize}px`;
                    ball.element.style.height = `${ball.currentSize}px`;
                    
                    // Двигаем шарик
                    const speed = 0.05 * (ball.size / 30);
                    ball.x += (Math.random() - 0.5) * deltaTime * speed;
                    ball.y += (Math.random() - 0.5) * deltaTime * speed;
                    
                    // Проверяем границы
                    if (ball.x < 0) ball.x = 0;
                    if (ball.y < 0) ball.y = 0;
                    if (ball.x > gameContainer.offsetWidth - ball.currentSize) {
                        ball.x = gameContainer.offsetWidth - ball.currentSize;
                    }
                    if (ball.y > gameContainer.offsetHeight - ball.currentSize) {
                        ball.y = gameContainer.offsetHeight - ball.currentSize;
                    }
                    
                    ball.element.style.left = `${ball.x}px`;
                    ball.element.style.top = `${ball.y}px`;
                }
            }
            
            // Запуск игры
            function startGame() {
                startBtn.style.display = 'none';
                
                // Создаем несколько шариков
                for (let i = 0; i < 5; i++) {
                    createBall();
                }
                
                let lastTime = 0;
                function gameLoop(timestamp) {
                    if (!lastTime) lastTime = timestamp;
                    const deltaTime = timestamp - lastTime;
                    lastTime = timestamp;
                    
                    updateBalls(deltaTime);
                    
                    // С небольшой вероятностью добавляем новый шарик
                    if (Math.random() < 0.002) {
                        createBall();
                    }
                    
                    gameInterval = requestAnimationFrame(gameLoop);
                }
                
                gameInterval = requestAnimationFrame(gameLoop);
            }
            
            // Обработчик кнопки начала игры
            startBtn.addEventListener('click', startGame);
        });
    </script>
</body>
</html>
