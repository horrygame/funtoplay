<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Прыгающие шарики</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #2c3e50;
            font-family: Arial, sans-serif;
        }
        
        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        #game-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        
        .ball {
            position: absolute;
            transition: transform 0.5s ease-out;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #c0392b);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        #score {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
        
        #start-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 30px;
            font-size: 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        
        #start-btn:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <img id="game-bg" src="bg_game.png" alt="Игровой фон">
        <div id="score">Шариков: 0</div>
        <button id="start-btn">Начать игру</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const gameContainer = document.getElementById('game-container');
            const scoreElement = document.getElementById('score');
            const startBtn = document.getElementById('start-btn');
            const balls = [];
            let ballCount = 0;
            let gameInterval;
            
            // Замените это на ваше изображение bg_game.png в формате base64 или URL
            const bgImageUrl = "bg_game.png";
            
            document.getElementById('game-bg').src = bgImageUrl;
            
            // Создание шарика
            function createBall() {
                const ball = document.createElement('div');
                ball.className = 'ball';
                
                const size = 30 + Math.random() * 40; // Размер от 30 до 70px
                const initialSize = size * 0.3;
                
                ball.style.width = `${initialSize}px`;
                ball.style.height = `${initialSize}px`;
                
                // Начальная позиция
                const x = Math.random() * (gameContainer.offsetWidth - initialSize);
                const y = Math.random() * (gameContainer.offsetHeight - initialSize);
                
                ball.style.left = `${x}px`;
                ball.style.top = `${y}px`;
                
                // Случайный цвет для шарика
                const hue = Math.random() * 360;
                ball.style.background = `radial-gradient(circle at 30% 30%, hsl(${hue}, 100%, 70%), hsl(${hue}, 80%, 50%))`;
                
                gameContainer.appendChild(ball);
                
                // Направление и скорость движения
                const speed = 0.05 + Math.random() * 0.05;
                const angle = Math.random() * Math.PI * 2;
                const dx = Math.cos(angle) * speed;
                const dy = Math.sin(angle) * speed;
                
                balls.push({
                    element: ball,
                    x: x,
                    y: y,
                    size: size,
                    currentSize: initialSize,
                    dx: dx,
                    dy: dy,
                    growing: true,
                    pausing: false,
                    pauseTime: 0
                });
                
                ballCount++;
                scoreElement.textContent = `Шариков: ${ballCount}`;
            }
            
            // Обновление состояния шариков
            function updateBalls(deltaTime) {
                for (const ball of balls) {
                    if (ball.pausing) {
                        ball.pauseTime += deltaTime;
                        if (ball.pauseTime >= 500) {
                            ball.pausing = false;
                            ball.pauseTime = 0;
                            ball.growing = true;
                        }
                        continue;
                    }
                    
                    // Пульсация размера
                    if (ball.growing) {
                        ball.currentSize += deltaTime * 0.1;
                        if (ball.currentSize >= ball.size * 1.5) { // Максимум в 1.5 раза
                            ball.currentSize = ball.size * 1.5;
                            ball.growing = false;
                        }
                    } else {
                        ball.currentSize -= deltaTime * 0.1;
                        if (ball.currentSize <= ball.size * 0.3) {
                            ball.currentSize = ball.size * 0.3;
                            ball.growing = true;
                            ball.pausing = true;
                        }
                    }
                    
                    ball.element.style.width = `${ball.currentSize}px`;
                    ball.element.style.height = `${ball.currentSize}px`;
                    
                    // Двигаем шарик
                    ball.x += ball.dx * deltaTime;
                    ball.y += ball.dy * deltaTime;
                    
                    // Проверяем границы и отражаем от них
                    if (ball.x < 0) {
                        ball.x = 0;
                        ball.dx = Math.abs(ball.dx);
                    } else if (ball.x > gameContainer.offsetWidth - ball.currentSize) {
                        ball.x = gameContainer.offsetWidth - ball.currentSize;
                        ball.dx = -Math.abs(ball.dx);
                    }
                    
                    if (ball.y < 0) {
                        ball.y = 0;
                        ball.dy = Math.abs(ball.dy);
                    } else if (ball.y > gameContainer.offsetHeight - ball.currentSize) {
                        ball.y = gameContainer.offsetHeight - ball.currentSize;
                        ball.dy = -Math.abs(ball.dy);
                    }
                    
                    // Плавное перемещение
                    ball.element.style.left = `${ball.x}px`;
                    ball.element.style.top = `${ball.y}px`;
                }
            }
            
            // Запуск игры
            function startGame() {
                startBtn.style.display = 'none';
                
                // Создаем несколько шариков
                for (let i = 0; i < 5; i++) {
                    createBall();
                }
                
                let lastTime = 0;
                function gameLoop(timestamp) {
                    if (!lastTime) lastTime = timestamp;
                    const deltaTime = timestamp - lastTime;
                    lastTime = timestamp;
                    
                    updateBalls(deltaTime);
                    
                    // С небольшой вероятностью добавляем новый шарик
                    if (Math.random() < 0.002) {
                        createBall();
                    }
                    
                    gameInterval = requestAnimationFrame(gameLoop);
                }
                
                gameInterval = requestAnimationFrame(gameLoop);
            }
            
            // Обработчик кнопки начала игры
            startBtn.addEventListener('click', startGame);
        });
    </script>
</body>
</html>
